{
  "openapi": "3.0.1",
  "info": {
    "title": "SkiResort",
    "description": "API for Web Course Project",
    "version": "v1"
  },
  "paths": {
    "/account/login": {
      "post": {
        "tags": [
          "account"
        ],
        "summary": "Log in",
        "parameters": [
          {
            "name": "userEmail",
            "in": "query",
            "description": "User's email",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "userPassword",
            "in": "query",
            "description": "User's password",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Authorization went successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/JsonResult"
                }
              }
            }
          },
          "404": {
            "description": "User with such email wasn't found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Incorrect password",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/account/register": {
      "post": {
        "tags": [
          "account"
        ],
        "summary": "Register",
        "parameters": [
          {
            "name": "userEmail",
            "in": "query",
            "description": "User's email",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "userPassword",
            "in": "query",
            "description": "User's password",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Registration went successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/JsonResult"
                }
              }
            }
          },
          "401": {
            "description": "User with such email already exists",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/account": {},
    "/cardReadings": {},
    "/cardReadings/{recordID}": {},
    "/cards": {},
    "/cards/{cardID}": {},
    "/lifts": {
      "get": {
        "tags": [
          "lifts"
        ],
        "summary": "Get information about all lifts",
        "responses": {
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "200": {
            "description": "Information about all lifts",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Lift"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/lifts/{liftName}": {
      "get": {
        "tags": [
          "lifts"
        ],
        "summary": "Get information about a lift by it's name",
        "parameters": [
          {
            "name": "liftName",
            "in": "path",
            "description": "Name of the lift",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "200": {
            "description": "Lift with specified name",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LiftWithSlopes"
                }
              }
            }
          },
          "404": {
            "description": "Lift with specified name not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/messages": {},
    "/messages/{messageID}": {},
    "/slopes": {
      "get": {
        "tags": [
          "slopes"
        ],
        "summary": "Get information about all slopes",
        "responses": {
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "200": {
            "description": "Information about all slopes",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Slope"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/slopes/{slopeName}": {
      "get": {
        "tags": [
          "slopes"
        ],
        "summary": "Get information about a slope by it's name",
        "parameters": [
          {
            "name": "slopeName",
            "in": "path",
            "description": "Name of the slope",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "200": {
            "description": "Slope with specified name",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SlopeWithLifts"
                }
              }
            }
          },
          "404": {
            "description": "Slope with specified name not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/turnstiles": {},
    "/turnstiles/{turnstileID}": {},
    "/users": {},
    "/users/{userID}": {}
  },
  "components": {
    "schemas": {
      "Card": {
        "type": "object",
        "properties": {
          "cardID": {
            "type": "integer",
            "description": "Card ID",
            "format": "int32"
          },
          "activationTime": {
            "type": "string",
            "description": "The time when the card was activated",
            "format": "date-time"
          },
          "type": {
            "type": "string",
            "description": "Type of the card",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Information about cards used in the resort"
      },
      "CardReading": {
        "type": "object",
        "properties": {
          "recordID": {
            "type": "integer",
            "description": "The ID of the record about card reading",
            "format": "int32"
          },
          "turnstileID": {
            "type": "integer",
            "description": "ID of the turnstile where the reading took place",
            "format": "int32"
          },
          "cardID": {
            "type": "integer",
            "description": "ID of the card that was read",
            "format": "int32"
          },
          "readingTime": {
            "type": "string",
            "description": "The time of the card reading",
            "format": "date-time"
          }
        },
        "additionalProperties": false,
        "description": "Information about readings of cards on turnstiles of the resort"
      },
      "IActionResult": {
        "type": "object",
        "additionalProperties": false
      },
      "JsonResult": {
        "type": "object",
        "properties": {
          "contentType": {
            "type": "string",
            "nullable": true
          },
          "serializerSettings": {
            "nullable": true
          },
          "statusCode": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "value": {
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "Lift": {
        "type": "object",
        "properties": {
          "liftID": {
            "type": "integer",
            "description": "Lift ID",
            "format": "int32"
          },
          "liftName": {
            "type": "string",
            "description": "Lift name",
            "nullable": true
          },
          "isOpen": {
            "type": "boolean",
            "description": "Is the lift working right now or not"
          },
          "seatsAmount": {
            "type": "integer",
            "description": "The amount of seats in the lift",
            "format": "int32"
          },
          "liftingTime": {
            "type": "integer",
            "description": "The time lift needs to lift from the beginning to the end",
            "format": "int32"
          },
          "queueTime": {
            "type": "integer",
            "description": "Current time in queue to the lift",
            "format": "int32",
            "default": 0
          }
        },
        "additionalProperties": false,
        "description": "Information about a lift"
      },
      "LiftWithSlopes": {
        "type": "object",
        "properties": {
          "liftID": {
            "type": "integer",
            "description": "Lift ID",
            "format": "int32"
          },
          "liftName": {
            "type": "string",
            "description": "Lift name",
            "nullable": true
          },
          "isOpen": {
            "type": "boolean",
            "description": "Is the lift working right now or not"
          },
          "seatsAmount": {
            "type": "integer",
            "description": "The amount of seats in the lift",
            "format": "int32"
          },
          "liftingTime": {
            "type": "integer",
            "description": "The time lift needs to lift from the beginning to the end",
            "format": "int32"
          },
          "queueTime": {
            "type": "integer",
            "description": "Current time in queue to the lift",
            "format": "int32",
            "default": 0
          },
          "connectedSlopes": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Slope"
            },
            "description": "Slopes connected to the lift",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Information about a lift"
      },
      "Message": {
        "type": "object",
        "properties": {
          "messageID": {
            "type": "integer",
            "description": "Message ID",
            "format": "int32"
          },
          "senderID": {
            "type": "integer",
            "description": "Sender ID",
            "format": "int32"
          },
          "checkedByID": {
            "type": "integer",
            "description": "ID of the ski patrol worker who checked the message",
            "format": "int32"
          },
          "text": {
            "type": "string",
            "description": "Text of the message",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Information about cards used in the resort"
      },
      "ProblemDetails": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "nullable": true
          },
          "title": {
            "type": "string",
            "nullable": true
          },
          "status": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "detail": {
            "type": "string",
            "nullable": true
          },
          "instance": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": {}
      },
      "Slope": {
        "type": "object",
        "properties": {
          "slopeID": {
            "type": "integer",
            "description": "Slope ID",
            "format": "int32"
          },
          "slopeName": {
            "type": "string",
            "description": "Slope name",
            "nullable": true
          },
          "isOpen": {
            "type": "boolean",
            "description": "Is the slope working right now or not"
          },
          "difficultyLevel": {
            "type": "integer",
            "description": "The difficulty level of the slope",
            "format": "int32"
          }
        },
        "additionalProperties": false,
        "description": "Information about a slope"
      },
      "SlopeWithLifts": {
        "type": "object",
        "properties": {
          "slopeID": {
            "type": "integer",
            "description": "Slope ID",
            "format": "int32"
          },
          "slopeName": {
            "type": "string",
            "description": "Slope name",
            "nullable": true
          },
          "isOpen": {
            "type": "boolean",
            "description": "Is the slope working right now or not"
          },
          "difficultyLevel": {
            "type": "integer",
            "description": "The difficulty level of the slope",
            "format": "int32"
          },
          "connectedLifts": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Lift"
            },
            "description": "Lifts connected to the slope",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Information about a slope"
      },
      "Turnstile": {
        "type": "object",
        "properties": {
          "turnstileID": {
            "type": "integer",
            "description": "Turnstile ID",
            "format": "int32"
          },
          "liftID": {
            "type": "integer",
            "description": "ID of the lift to which the turnstile is connected",
            "format": "int32"
          },
          "isOpen": {
            "type": "boolean",
            "description": "Is the turnstile currently working or not"
          }
        },
        "additionalProperties": false,
        "description": "Information about turnstiles"
      },
      "UserAccount": {
        "type": "object",
        "properties": {
          "userEmail": {
            "type": "string",
            "nullable": true
          },
          "password": {
            "type": "string",
            "nullable": true
          },
          "role": {
            "type": "string",
            "nullable": true
          },
          "cardID": {
            "type": "integer",
            "format": "int32"
          }
        },
        "additionalProperties": false
      }
    }
  }
}